apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudwatch-exporter-config
  namespace: {{ include "cloudwatch.namespace" . }}
data:
  config.yml: |-
    apiVersion: v1alpha1
    discovery:
      jobs:
        - type: rds
          regions:
            - us-east-1
          searchTags:
            - key: DataplaneClusterName
              value: ^{{ .Values.clusterName }}$
          metrics:
            - name: DatabaseConnections
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: ServerlessDatabaseCapacity
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: ACUUtilization
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: FreeableMemory
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: CPUUtilization
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: ReadLatency
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: ReadThroughput
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: WriteLatency
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: WriteThroughput
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: NetworkThroughput
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: AuroraReplicaLag
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: MaximumUsedTransactionIDs
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: TransactionLogsDiskUsage
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: Deadlocks
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
            - name: BufferCacheHitRatio
              statistics:
                - Average
                - Maximum
                - Minimum
                - p90
                - p95
                - p99
