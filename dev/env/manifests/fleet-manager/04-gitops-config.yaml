apiVersion: v1
kind: ConfigMap
metadata:
  name: fleet-manager-gitops-config
  namespace: "$ACSCS_NAMESPACE"
data:
  config.yaml: |
    rhacsOperators:

      crdUrls:
        - https://raw.githubusercontent.com/stackrox/stackrox/4.2.1/operator/bundle/manifests/platform.stackrox.io_securedclusters.yaml
        - https://raw.githubusercontent.com/stackrox/stackrox/4.2.1/operator/bundle/manifests/platform.stackrox.io_centrals.yaml

      operators:

        - deploymentName: "stackrox-operator-4.2.0-366-g069902f3f9"
          image: "quay.io/rhacs-eng/stackrox-operator:4.2.0-366-g069902f3f9"
          centralLabelSelector: "rhacs.redhat.com/version-selector=4.2.0-366-g069902f3f9"
          securedClusterReconcilerEnabled: false

        - deploymentName: "stackrox-operator-4.2.2-rc.0"
          image: "quay.io/rhacs-eng/stackrox-operator:4.2.2-rc.0"
          centralLabelSelector: "rhacs.redhat.com/version-selector=4.2.2-rc.0"
          securedClusterReconcilerEnabled: false

    centrals:
      overrides:
        - instanceIds:
            - "*"
          patch: |
            # Set label for all centrals to 4.2.2-rc.0
            metadata:
              labels:
                rhacs.redhat.com/version-selector: "4.2.2-rc.0"
            # Adjust centrals for development environment
            spec:
              central:
                monitoring:
                  openshift:
                    enabled: false
                resources:
                  limits:
                    cpu: 200m
                    memory: 300Mi
                  requests:
                    cpu: 100m
                    memory: 200Mi
              scanner:
                analyzer:
                  resources:
                    limits:
                      cpu: 200m
                      memory: 300Mi
                    requests:
                      cpu: 200m
                      memory: 300Mi
                  scaling:
                    autoScaling: "Disabled"
                    replicas: 1
                db:
                  resources:
                    limits:
                      cpu: 200m
                      memory: 200Mi
                    requests:
                      cpu: 200m
                      memory: 200Mi
