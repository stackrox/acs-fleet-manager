apiVersion: v1
kind: ConfigMap
metadata:
  name: fleet-manager-gitops-config
  namespace: "$ACSCS_NAMESPACE"
data:
  config.yaml: |
    rhacsOperators:

      crdUrls:
        - https://raw.githubusercontent.com/stackrox/stackrox/4.1.2/operator/bundle/manifests/platform.stackrox.io_securedclusters.yaml
        - https://raw.githubusercontent.com/stackrox/stackrox/4.1.2/operator/bundle/manifests/platform.stackrox.io_centrals.yaml

      operators:

        - deploymentName: "rhacs-operator-4-2-0"
          image: "quay.io/rhacs-eng/stackrox-operator:4.2.0"
          centralLabelSelector: "rhacs.redhat.com/version-selector=4.2.0"
          securedClusterReconcilerEnabled: false
          resources:
            requests:
              cpu: 100m
              memory: 200Mi

        - deploymentName: "rhacs-operator-4-1-0"
          image: "quay.io/rhacs-eng/stackrox-operator:4.1.0"
          centralLabelSelector: "rhacs.redhat.com/version-selector=4.1.0"
          securedClusterReconcilerEnabled: false
          resources:
            requests:
              cpu: 100m
              memory: 200Mi
    centrals:
      overrides:
        # Set label for all centrals to 4.1.0
        - instanceIds: ["*"]
          patch: |
            metadata:
              labels:
                rhacs.redhat.com/version-selector: "4.2.0"

        # Adjust centrals for development environment
        - instanceIds:
            - "*"
          patch: |
            spec:
              central:
                monitoring:
                  openshift:
                    enabled: false
                resources:
                  limits:
                    cpu: null
                    memory: 1Gi
                  requests:
                    cpu: 100m
                    memory: 200Mi
              scanner:
                analyzer:
                  resources:
                    limits:
                      cpu: null
                      memory: 1Gi
                    requests:
                      cpu: 100m
                      memory: 500Mi
                db:
                  resources:
                    limits:
                      cpu: null
                      memory: 1Gi
                    requests:
                      cpu: 100m
                      memory: 500Mi
